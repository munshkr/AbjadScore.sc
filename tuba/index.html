<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
p {
  text-align: left;
  font-size: 10px;
  margin-top: 0px;
}
.container {
  border: 10px solid #b6bdc3;
  width: 100%;
  background: #fff;
  margin: 0 auto;
}

div .wrapper {
  height: 100%
}

object {
  width: 100%;
}

.active {
  border: 10px solid #b6bdc3;
}
.visible
      {
                       visibility: visible;
                       opacity: 1;
                       transition: opacity 0.5s linear;
               }                
               /* Fade-Out Effect */
.hidden
               {
                       visibility: hidden;
                       opacity: 0;
                       transition: visibility 0s 0.5s, opacity 2s linear;
               }                
.slide-top {
	-webkit-animation: slide-top 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;
	        animation: slide-top 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;
}
/* ----------------------------------------------
 * Generated by Animista on 2019-9-16 2:14:12
 * Licensed under FreeBSD License.
 * See http://animista.net/license for more info. 
 * w: http://animista.net, t: @cssanimista
 * ---------------------------------------------- */

/**
 * ----------------------------------------
 * animation slide-top
 * ----------------------------------------
 */
@-webkit-keyframes slide-top {
  0% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
  }
  100% {
    -webkit-transform: translateY(-100px);
            transform: translateY(-100px);
  }
}
@keyframes slide-top {
  0% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
  }
  100% {
    -webkit-transform: translateY(-100px);
            transform: translateY(-100px);
  }
}

.slide-bottom {
	-webkit-animation: slide-bottom 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;
	        animation: slide-bottom 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both;
}
/* ----------------------------------------------
 * Generated by Animista on 2019-9-16 2:15:20
 * Licensed under FreeBSD License.
 * See http://animista.net/license for more info. 
 * w: http://animista.net, t: @cssanimista
 * ---------------------------------------------- */

/**
 * ----------------------------------------
 * animation slide-bottom
 * ----------------------------------------
 */
@-webkit-keyframes slide-bottom {
  0% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
  }
  100% {
    -webkit-transform: translateY(100%);
            transform: translateY(100%);
  }
}
@keyframes slide-bottom {
  0% {
    -webkit-transform: translateY(0);
            transform: translateY(0);
  }
  100% {
    -webkit-transform: translateY(100%);
            transform: translateY(100%);
  }
}

}
</style>
</head>
<body>
<div class="wrapper">
<object class="hidden" id="current" type='image/svg+xml' data="svg/output.cropped.svg"> Actual score </object>
<object class="visible active" id="prev" type='image/svg+xml' data="svg/output.cropped_prev.svg"> Previous score </object>
</div>
<p id="txt"></p>

<script>
var t;
var start_beat = 4;
var wait_beat = 4;
var bpm = 60;
var beat_dur = 60/bpm;
var c = start_beat + wait_beat;
var timer_is_on = 0;

function changeBackground(color, svgId) {
   document.getElementById(svgId).style.background = color;
}

changeBackground('GhostWhite', 'prev')

function timedCount() {
  document.getElementById("txt").innerHTML = c;
  c = c - 1;
  t = setTimeout(timedCount, 1000 * beat_dur);

  if (c < start_beat){
    if (c % 2) {
      changeBackground('DarkSlateGray', 'current');
    } else {
      changeBackground('DarkGray', 'current');
    }

  if (c < 0) {
    stopCount()
    }
  }
}

function startCount() {
  if (!timer_is_on) {
      timer_is_on = start_beat + wait_beat;
      changeBackground('DarkGray', 'current');
      document.getElementById("current").classList.remove('hidden');
      document.getElementById("current").classList.add('visible');
      timedCount();
  }
}


function stopCount() {
  clearTimeout(t);
  changeBackground('white', 'current');
 
  document.getElementById("prev").classList.add('slide-bottom');
  document.getElementById("prev").classList.remove('visible');
  document.getElementById("prev").classList.add('hidden');

  document.getElementById("current").classList.add('slide-bottom');
  document.getElementById("current").classList.add('active');
//  document.getElementById("score").innerHTML = "Enabled score";
  timer_is_on = 0;
  c = start_beat + wait_beat;
}

startCount();

//FullScreen

/* Get the documentElement (<html>) to display the page in fullscreen */
var elem = document.documentElement;

/* View in fullscreen */
function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.mozRequestFullScreen) { /* Firefox */
    elem.mozRequestFullScreen();
  } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE/Edge */
    elem.msRequestFullscreen();
  }
}

/* Close fullscreen */
function closeFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.mozCancelFullScreen) { /* Firefox */
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) { /* IE/Edge */
    document.msExitFullscreen();
  }
}
</script>
</body>
</html>
